syntax = "proto3";

package services.citizenstore;
option go_package = "github.com/galexrt/arpanet/proto/services/citizenstore;citizenstore";

import "resources/common/database/database.proto";
import "resources/users/users.proto";
import "validate/validate.proto";

message FindUsersRequest {
  int64 offset = 1 [(validate.rules).int64.gte = 0];
  repeated resources.common.database.OrderBy orderBy = 2 [(validate.rules).repeated.max_items = 3];
  // Search params
  string searchName = 3 [(validate.rules).string.max_len = 50];
  bool wanted = 4;
}

message FindUsersResponse {
  int64 total_count = 1;
  int64 offset = 2;
  int64 end = 3;
  repeated resources.users.User users = 4;
}

message GetUserRequest {
  int32 user_id = 1 [(validate.rules).int32.gt = 0];
}

message GetUserResponse {
  resources.users.User user = 1;
}

message GetUserActivityRequest {
  int32 user_id = 1 [(validate.rules).int32.gt = 0];
}

message GetUserActivityResponse {
  repeated resources.users.UserActivity activity = 1;
}

message SetUserPropsRequest {
  resources.users.UserProps props = 1;
}

message SetUserPropsResponse {}

service CitizenStoreService {
  // @permission: fields=Licenses,UserProps
  rpc FindUsers(FindUsersRequest) returns (FindUsersResponse);
  // @permission: name=FindUsers
  rpc GetUser(GetUserRequest) returns (GetUserResponse);
  // @permission: fields=CauseUser
  rpc GetUserActivity(GetUserActivityRequest) returns (GetUserActivityResponse);
  // @permission: fields=Wanted
  rpc SetUserProps(SetUserPropsRequest) returns (SetUserPropsResponse);
}
