syntax = "proto3";

package services.completor;
option go_package = "github.com/galexrt/fivenet/proto/services/completor;completor";

import "resources/documents/category.proto";
import "resources/jobs/jobs.proto";
import "resources/users/users.proto";
import "validate/validate.proto";

message CompleteCharNamesRequest {
  string search = 1 [(validate.rules).string.max_len = 50];
}

message CompleteCharNamesRespoonse {
  repeated resources.users.UserShort users = 1; // @gotags: alias:"user"
}

message CompleteJobNamesRequest {
  optional string search = 1 [(validate.rules).string.max_len = 50];
  bool exact_match = 2;
  bool current_job = 3;
}

message CompleteJobNamesResponse {
  repeated resources.jobs.Job jobs = 1;
}

message CompleteDocumentCategoryRequest {
  string search = 1 [(validate.rules).string.max_len = 128];
}

message CompleteDocumentCategoryResponse {
  repeated resources.documents.DocumentCategory categories = 1;
}

service CompletorService {
  // @perm: description="Complete Citizen Names"
  rpc CompleteCharNames(CompleteCharNamesRequest) returns (CompleteCharNamesRespoonse);
  // @perm: description="Complete Job Names and Grades/Ranks"
  rpc CompleteJobNames(CompleteJobNamesRequest) returns (CompleteJobNamesResponse);
  // @perm: PerJob=true;description="Complete a Jobs Document Categories"
  rpc CompleteDocumentCategory(CompleteDocumentCategoryRequest) returns (CompleteDocumentCategoryResponse);
}
