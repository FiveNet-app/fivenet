syntax = "proto3";

package users;
option go_package = "github.com/galexrt/arpanet/proto/services/users;users";

import "resources/common/database/database.proto";
import "resources/users/users.proto";
import "validate/validate.proto";

message FindUsersRequest {
    int64 offset = 1 [(validate.rules).int64.gte = 0];
    repeated resources.common.database.OrderBy orderBy = 2 [(validate.rules).repeated.min_items = 1];
    // Search params
    string firstname = 3 [(validate.rules).string.max_len = 50];
    string lastname = 4 [(validate.rules).string.max_len = 50];
    bool wanted = 5;
}

message FindUsersResponse {
    int64 totalCount = 1;
    int64 offset = 2;
    int64 end = 3;
    repeated resources.users.User users = 4;
}

message GetUserRequest {
    int32 userID = 1 [(validate.rules).int32.gt = 0];
}

message GetUserResponse {
    resources.users.User user = 1;
}

message GetUserActivityRequest {
    int32 userID = 1 [(validate.rules).int32.gt = 0];
}

message GetUserActivityResponse {
    repeated resources.users.UserActivity activity = 1;
}

message SetUserPropsRequest {
    int32 userID = 1 [(validate.rules).int32.gt = 0];
    resources.users.UserProps props = 2;
}

message SetUserPropsResponse {}

service UsersService {
    rpc FindUsers(FindUsersRequest) returns (FindUsersResponse);
    rpc GetUser(GetUserRequest) returns (GetUserResponse);
    rpc GetUserActivity(GetUserActivityRequest) returns (GetUserActivityResponse);
    rpc SetUserProps(SetUserPropsRequest) returns (SetUserPropsResponse);
}
