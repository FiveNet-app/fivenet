syntax = "proto3";

package resources.rector;

import "google/protobuf/duration.proto";

option go_package = "github.com/galexrt/fivenet/gen/go/proto/resources/rector;rector";

message AppConfig {
  Auth auth = 1;
  Website website = 2;
  JobInfo job_info = 3;
  UserTracker user_tracker = 4;
  OAuth2 oauth2 = 5;
  Discord discord = 6;
}

message Auth {
  bool signup_enabled = 1;
  // TODO default perms and attributes
}

message Website {
  Links links = 1;
}

message Links {
  optional string privacy_policy = 1;
  optional string imprint = 2;
}

message JobInfo {
  repeated string public_jobs = 1;
  repeated string hidden_jobs = 2;
}

message UserTracker {
  google.protobuf.Duration refresh_time = 1;
  google.protobuf.Duration db_refresh_time = 2;
  repeated string livemap_jobs = 3;
  repeated string timeclock_jobs = 4;
}

message OAuth2 {
  repeated OAuth2Provider providers = 1;
}

message OAuth2Provider {
  string name = 1;
  string label = 2;
  string homepage = 3;
  string type = 4;
  string redirect_url = 5;
  string client_id = 6;
  string client_secret = 7;
  repeated string scopes = 8;
  OAuth2Endpoints endpoints = 9;
  OAuth2Mapping mapping = 10;
}

message OAuth2Endpoints {
  optional string auth_url = 1;
  optional string token_url = 2;
  optional string user_info_url = 3;
}

message OAuth2Mapping {
  string id = 1;
  string username = 2;
  string avatar = 3;
}

message Discord {
  bool enabled = 1;
  // TODO
}

message PluginConfig {
  // TODO
}
