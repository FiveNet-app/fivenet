import{D as E,E as j,G as _t,H as J,I as je,J as Pt,r as N,K as me,L as Ze,d as ne,M as ue,N as Ft,O as B,B as Z,P as Lt,Q as et,R as zt,S as Se,o as ge,U as Ie,V as Nt,W as Bt,X as Vt,Y as Ce,Z as Be,F as Oe,$ as Ve,a0 as we,a1 as Dt,a2 as tt,a3 as jt,a4 as Kt,a5 as Ke,a6 as Q,a7 as nt,a8 as Ue,a as Ut,a9 as Ht,aa as q,l as st,ab as Re,ac as it,ad as ot,ae as lt,af as ve,b as L,c as U,n as z,t as ee,f as G,e as te,ag as Me,ah as H,w as de,ai as ce,aj as Ee,ak as Wt,j as qt,al as Gt,am as He,an as rt,ao as at,ap as Ae,aq as ut,ar as ct,as as Yt,at as Jt,g as dt,au as Qt,av as Xt,aw as Zt,ax as en,ay as tn,y as nn,u as sn,az as on,aA as ln,aB as rn,aC as an,aD as un,aE as cn}from"./fd40LXgt.js";import{_ as ht,u as ft}from"./zhc1zMh6.js";import{f as dn}from"./BhCHo9Hz.js";import"./C-F1gjmX.js";const hn={wrapper:"flex flex-col flex-1 min-h-0 divide-y divide-gray-100 dark:divide-gray-800",container:"relative flex-1 overflow-y-auto divide-y divide-gray-100 dark:divide-gray-800 scroll-py-2",input:{wrapper:"relative flex items-center",base:"w-full placeholder-gray-400 dark:placeholder-gray-500 bg-transparent border-0 text-gray-900 dark:text-white focus:ring-0 focus:outline-none",padding:"px-4",height:"h-12",size:"sm:text-sm",icon:{base:"pointer-events-none absolute start-4 text-gray-400 dark:text-gray-500",loading:"animate-spin",size:"h-5 w-5",padding:"ps-11"},closeButton:{base:"absolute end-4",padding:"pe-10"}},emptyState:{wrapper:"flex flex-col items-center justify-center flex-1 px-6 py-14 sm:px-14",label:"text-sm text-center text-gray-900 dark:text-white",queryLabel:"text-sm text-center text-gray-900 dark:text-white",icon:"w-6 h-6 mx-auto text-gray-400 dark:text-gray-500 mb-4"},group:{wrapper:"p-2",label:"px-2.5 my-2 text-xs font-semibold text-gray-900 dark:text-white",container:"text-sm text-gray-700 dark:text-gray-200",command:{base:"flex justify-between select-none items-center rounded-md px-2.5 py-1.5 gap-2 relative",active:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white",inactive:"",label:"flex items-center gap-1.5 min-w-0",prefix:"text-gray-400 dark:text-gray-500",suffix:"text-gray-400 dark:text-gray-500",container:"flex items-center gap-1.5 min-w-0",icon:{base:"flex-shrink-0 w-5 h-5",active:"text-gray-900 dark:text-white",inactive:"text-gray-400 dark:text-gray-500"},selectedIcon:{base:"h-5 w-5 text-gray-900 dark:text-white flex-shrink-0"},avatar:{base:"flex-shrink-0",size:"2xs"},chip:{base:"flex-shrink-0 w-2 h-2 mx-1 rounded-full"},disabled:"opacity-50",shortcuts:"hidden md:inline-flex flex-shrink-0 gap-0.5"},active:"flex-shrink-0 text-gray-500 dark:text-gray-400",inactive:"flex-shrink-0 text-gray-500 dark:text-gray-400"},default:{icon:"i-heroicons-magnifying-glass-20-solid",loadingIcon:"i-heroicons-arrow-path-20-solid",emptyState:{icon:"i-heroicons-magnifying-glass-20-solid",label:"We couldn't find any items.",queryLabel:"We couldn't find any items with that term. Please try again."},closeButton:null,selectedIcon:"i-heroicons-check-20-solid"}};function re(e,n,t){let i=t.initialDeps??[],s;return()=>{var o,r,l,c;let u;t.key&&((o=t.debug)!=null&&o.call(t))&&(u=Date.now());const a=e();if(!(a.length!==i.length||a.some((g,O)=>i[O]!==g)))return s;i=a;let f;if(t.key&&((r=t.debug)!=null&&r.call(t))&&(f=Date.now()),s=n(...a),t.key&&((l=t.debug)!=null&&l.call(t))){const g=Math.round((Date.now()-u)*100)/100,O=Math.round((Date.now()-f)*100)/100,R=O/16,A=(S,k)=>{for(S=String(S);S.length<k;)S=" "+S;return S};console.info(`%c⏱ ${A(O,5)} /${A(g,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*R,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(c=t==null?void 0:t.onChange)==null||c.call(t,s),s}}function Te(e,n){if(e===void 0)throw new Error(`Unexpected undefined${n?`: ${n}`:""}`);return e}const fn=(e,n)=>Math.abs(e-n)<1,pn=e=>e,vn=e=>{const n=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),i=[];for(let s=n;s<=t;s++)i.push(s);return i},mn=(e,n)=>{const t=e.scrollElement;if(!t)return;const i=o=>{const{width:r,height:l}=o;n({width:Math.round(r),height:Math.round(l)})};if(i(t.getBoundingClientRect()),typeof ResizeObserver>"u")return()=>{};const s=new ResizeObserver(o=>{const r=o[0];if(r!=null&&r.borderBoxSize){const l=r.borderBoxSize[0];if(l){i({width:l.inlineSize,height:l.blockSize});return}}i(t.getBoundingClientRect())});return s.observe(t,{box:"border-box"}),()=>{s.unobserve(t)}},gn=(e,n)=>{const t=e.scrollElement;if(!t)return;const i=()=>{n(t[e.options.horizontal?"scrollLeft":"scrollTop"])};return i(),t.addEventListener("scroll",i,{passive:!0}),()=>{t.removeEventListener("scroll",i)}},bn=(e,n,t)=>{if(n!=null&&n.borderBoxSize){const i=n.borderBoxSize[0];if(i)return Math.round(i[t.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[t.options.horizontal?"width":"height"])},yn=(e,{adjustments:n=0,behavior:t},i)=>{var s,o;const r=e+n;(o=(s=i.scrollElement)==null?void 0:s.scrollTo)==null||o.call(s,{[i.options.horizontal?"left":"top"]:r,behavior:t})};class xn{constructor(n){this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.isScrollingTimeoutId=null,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=(()=>{let t=null;const i=()=>t||(typeof ResizeObserver<"u"?t=new ResizeObserver(s=>{s.forEach(o=>{this._measureElement(o.target,o)})}):null);return{disconnect:()=>{var s;return(s=i())==null?void 0:s.disconnect()},observe:s=>{var o;return(o=i())==null?void 0:o.observe(s,{box:"border-box"})},unobserve:s=>{var o;return(o=i())==null?void 0:o.unobserve(s)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([i,s])=>{typeof s>"u"&&delete t[i]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:pn,rangeExtractor:vn,onChange:()=>{},measureElement:bn,initialRect:{width:0,height:0},scrollMargin:0,gap:0,scrollingDelay:150,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,...t}},this.notify=t=>{var i,s;(s=(i=this.options).onChange)==null||s.call(i,this,t)},this.maybeNotify=re(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.scrollElement=null},this._didMount=()=>(this.measureElementCache.forEach(this.observer.observe),()=>{this.observer.disconnect(),this.cleanup()}),this._willUpdate=()=>{const t=this.options.getScrollElement();this.scrollElement!==t&&(this.cleanup(),this.scrollElement=t,this._scrollToOffset(this.scrollOffset,{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,i=>{this.scrollAdjustments=0,this.scrollOffset!==i&&(this.isScrollingTimeoutId!==null&&(clearTimeout(this.isScrollingTimeoutId),this.isScrollingTimeoutId=null),this.isScrolling=!0,this.scrollDirection=this.scrollOffset<i?"forward":"backward",this.scrollOffset=i,this.maybeNotify(),this.isScrollingTimeoutId=setTimeout(()=>{this.isScrollingTimeoutId=null,this.isScrolling=!1,this.scrollDirection=null,this.maybeNotify()},this.options.scrollingDelay))})))},this.getSize=()=>this.scrollRect[this.options.horizontal?"width":"height"],this.memoOptions=re(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey],(t,i,s,o)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:i,scrollMargin:s,getItemKey:o}),{key:!1}),this.getFurthestMeasurement=(t,i)=>{const s=new Map,o=new Map;for(let r=i-1;r>=0;r--){const l=t[r];if(s.has(l.lane))continue;const c=o.get(l.lane);if(c==null||l.end>c.end?o.set(l.lane,l):l.end<c.end&&s.set(l.lane,!0),s.size===this.options.lanes)break}return o.size===this.options.lanes?Array.from(o.values()).sort((r,l)=>r.end===l.end?r.index-l.index:r.end-l.end)[0]:void 0},this.getMeasurements=re(()=>[this.memoOptions(),this.itemSizeCache],({count:t,paddingStart:i,scrollMargin:s,getItemKey:o},r)=>{const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const c=this.measurementsCache.slice(0,l);for(let u=l;u<t;u++){const a=o(u),d=this.options.lanes===1?c[u-1]:this.getFurthestMeasurement(c,u),f=d?d.end+this.options.gap:i+s,g=r.get(a),O=typeof g=="number"?g:this.options.estimateSize(u),R=f+O,A=d?d.lane:u%this.options.lanes;c[u]={index:u,start:f,size:O,end:R,key:a,lane:A}}return this.measurementsCache=c,c},{key:!1,debug:()=>this.options.debug}),this.calculateRange=re(()=>[this.getMeasurements(),this.getSize(),this.scrollOffset],(t,i,s)=>this.range=t.length>0&&i>0?Sn({measurements:t,outerSize:i,scrollOffset:s}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=re(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(t,i,s,o)=>i===null?[]:t({...i,overscan:s,count:o}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const i=this.options.indexAttribute,s=t.getAttribute(i);return s?parseInt(s,10):(console.warn(`Missing attribute name '${i}={index}' on measured element.`),-1)},this._measureElement=(t,i)=>{const s=this.measurementsCache[this.indexFromElement(t)];if(!s||!t.isConnected){this.measureElementCache.forEach((l,c)=>{l===t&&(this.observer.unobserve(t),this.measureElementCache.delete(c))});return}const o=this.measureElementCache.get(s.key);o!==t&&(o&&this.observer.unobserve(o),this.observer.observe(t),this.measureElementCache.set(s.key,t));const r=this.options.measureElement(t,i,this);this.resizeItem(s,r)},this.resizeItem=(t,i)=>{const s=this.itemSizeCache.get(t.key)??t.size,o=i-s;o!==0&&(t.start<this.scrollOffset+this.scrollAdjustments&&this._scrollToOffset(this.scrollOffset,{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(t.index),this.itemSizeCache=new Map(this.itemSizeCache.set(t.key,i)),this.notify(!1))},this.measureElement=t=>{t&&this._measureElement(t,void 0)},this.getVirtualItems=re(()=>[this.getIndexes(),this.getMeasurements()],(t,i)=>{const s=[];for(let o=0,r=t.length;o<r;o++){const l=t[o],c=i[l];s.push(c)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const i=this.getMeasurements();return Te(i[pt(0,i.length-1,s=>Te(i[s]).start,t)])},this.getOffsetForAlignment=(t,i)=>{const s=this.getSize();i==="auto"&&(t<=this.scrollOffset?i="start":t>=this.scrollOffset+s?i="end":i="start"),i==="start"?t=t:i==="end"?t=t-s:i==="center"&&(t=t-s/2);const o=this.options.horizontal?"scrollWidth":"scrollHeight",l=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[o]:this.scrollElement[o]:0)-this.getSize();return Math.max(Math.min(l,t),0)},this.getOffsetForIndex=(t,i="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const s=Te(this.getMeasurements()[t]);if(i==="auto")if(s.end>=this.scrollOffset+this.getSize()-this.options.scrollPaddingEnd)i="end";else if(s.start<=this.scrollOffset+this.options.scrollPaddingStart)i="start";else return[this.scrollOffset,i];const o=i==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,i),i]},this.isDynamicMode=()=>this.measureElementCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&(clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:i="start",behavior:s}={})=>{this.cancelScrollToIndex(),s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,i),{adjustments:void 0,behavior:s})},this.scrollToIndex=(t,{align:i="auto",behavior:s}={})=>{t=Math.max(0,Math.min(t,this.options.count-1)),this.cancelScrollToIndex(),s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const[o,r]=this.getOffsetForIndex(t,i);this._scrollToOffset(o,{adjustments:void 0,behavior:s}),s!=="smooth"&&this.isDynamicMode()&&(this.scrollToIndexTimeoutId=setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.measureElementCache.has(this.options.getItemKey(t))){const[c]=this.getOffsetForIndex(t,r);fn(c,this.scrollOffset)||this.scrollToIndex(t,{align:r,behavior:s})}else this.scrollToIndex(t,{align:r,behavior:s})}))},this.scrollBy=(t,{behavior:i}={})=>{this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.scrollOffset+t,{adjustments:void 0,behavior:i})},this.getTotalSize=()=>{var t;const i=this.getMeasurements();let s;return i.length===0?s=this.options.paddingStart:s=this.options.lanes===1?((t=i[i.length-1])==null?void 0:t.end)??0:Math.max(...i.slice(-this.options.lanes).map(o=>o.end)),s-this.options.scrollMargin+this.options.paddingEnd},this._scrollToOffset=(t,{adjustments:i,behavior:s})=>{this.options.scrollToFn(t,{behavior:s,adjustments:i},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(n),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(t=>{this.itemSizeCache.set(t.key,t.size)}),this.maybeNotify()}}const pt=(e,n,t,i)=>{for(;e<=n;){const s=(e+n)/2|0,o=t(s);if(o<i)e=s+1;else if(o>i)n=s-1;else return s}return e>0?e-1:0};function Sn({measurements:e,outerSize:n,scrollOffset:t}){const i=e.length-1,o=pt(0,i,l=>e[l].start,t);let r=o;for(;r<i&&e[r].end<t+n;)r++;return{startIndex:o,endIndex:r}}function In(e){const n=new xn(j(e)),t=_t(n),i=n._didMount();return J(()=>j(e).getScrollElement(),s=>{s&&n._willUpdate()},{immediate:!0}),J(()=>j(e),s=>{n.setOptions({...s,onChange:(o,r)=>{var l;je(t),(l=s.onChange)==null||l.call(s,o,r)}}),n._willUpdate(),je(t)},{immediate:!0}),Pt(i),t}function On(e){return In(E(()=>({observeElementRect:mn,observeElementOffset:gn,scrollToFn:yn,...j(e)})))}function wn(e,n,t){let i=N(t==null?void 0:t.value),s=E(()=>e.value!==void 0);return[E(()=>s.value?e.value:i.value),function(o){return s.value||(i.value=o),n==null?void 0:n(o)}]}function We(e){return[e.screenX,e.screenY]}function Mn(){let e=N([-1,-1]);return{wasMoved(n){let t=We(n);return e.value[0]===t[0]&&e.value[1]===t[1]?!1:(e.value=t,!0)},update(n){e.value=We(n)}}}function En({container:e,accept:n,walk:t,enabled:i}){me(()=>{let s=e.value;if(!s||i!==void 0&&!i.value)return;let o=Ze(e);if(!o)return;let r=Object.assign(c=>n(c),{acceptNode:n}),l=o.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,r,!1);for(;l.nextNode();)t(l.currentNode)})}function kn(e){throw new Error("Unexpected object: "+e)}var V=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(V||{});function qe(e,n){let t=n.resolveItems();if(t.length<=0)return null;let i=n.resolveActiveIndex(),s=i??-1;switch(e.focus){case 0:{for(let o=0;o<t.length;++o)if(!n.resolveDisabled(t[o],o,t))return o;return i}case 1:{s===-1&&(s=t.length);for(let o=s-1;o>=0;--o)if(!n.resolveDisabled(t[o],o,t))return o;return i}case 2:{for(let o=s+1;o<t.length;++o)if(!n.resolveDisabled(t[o],o,t))return o;return i}case 3:{for(let o=t.length-1;o>=0;--o)if(!n.resolveDisabled(t[o],o,t))return o;return i}case 4:{for(let o=0;o<t.length;++o)if(n.resolveId(t[o],o,t)===e.id)return o;return i}case 5:return null;default:kn(e)}}function vt(e={},n=null,t=[]){for(let[i,s]of Object.entries(e))gt(t,mt(n,i),s);return t}function mt(e,n){return e?e+"["+n+"]":n}function gt(e,n,t){if(Array.isArray(t))for(let[i,s]of t.entries())gt(e,mt(n,i.toString()),s);else t instanceof Date?e.push([n,t.toISOString()]):typeof t=="boolean"?e.push([n,t?"1":"0"]):typeof t=="string"?e.push([n,t]):typeof t=="number"?e.push([n,`${t}`]):t==null?e.push([n,""]):vt(t,n,e)}var Cn={};function Rn(e,n){return e===n}var Tn=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Tn||{}),$n=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))($n||{}),An=(e=>(e[e.Pointer=0]="Pointer",e[e.Focus=1]="Focus",e[e.Other=2]="Other",e))(An||{});let bt=Symbol("ComboboxContext");function be(e){let n=tt(bt,null);if(n===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,be),t}return n}let yt=Symbol("VirtualContext"),_n=ne({name:"VirtualProvider",setup(e,{slots:n}){let t=be("VirtualProvider"),i=E(()=>{let l=B(t.optionsRef);if(!l)return{start:0,end:0};let c=window.getComputedStyle(l);return{start:parseFloat(c.paddingBlockStart||c.paddingTop),end:parseFloat(c.paddingBlockEnd||c.paddingBottom)}}),s=On(E(()=>({scrollPaddingStart:i.value.start,scrollPaddingEnd:i.value.end,count:t.virtual.value.options.length,estimateSize(){return 40},getScrollElement(){return B(t.optionsRef)},overscan:12}))),o=E(()=>{var l;return(l=t.virtual.value)==null?void 0:l.options}),r=N(0);return J([o],()=>{r.value+=1}),et(yt,t.virtual.value?s:null),()=>[Ie("div",{style:{position:"relative",width:"100%",height:`${s.value.getTotalSize()}px`},ref:l=>{if(l){if(typeof process<"u"&&Cn.JEST_WORKER_ID!==void 0||t.activationTrigger.value===0)return;t.activeOptionIndex.value!==null&&t.virtual.value.options.length>t.activeOptionIndex.value&&s.value.scrollToIndex(t.activeOptionIndex.value)}}},s.value.getVirtualItems().map(l=>jt(n.default({option:t.virtual.value.options[l.index],open:t.comboboxState.value===0})[0],{key:`${r.value}-${l.index}`,"data-index":l.index,"aria-setsize":t.virtual.value.options.length,"aria-posinset":l.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${l.start}px)`,overflowAnchor:"none"}})))]}}),Pn=ne({name:"Combobox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],nullable:!0,default:null},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1},immediate:{type:[Boolean],default:!1},virtual:{type:Object,default:null}},inheritAttrs:!1,setup(e,{slots:n,attrs:t,emit:i}){let s=N(1),o=N(null),r=N(null),l=N(null),c=N(null),u=N({static:!1,hold:!1}),a=N([]),d=N(null),f=N(2),g=N(!1);function O(v=b=>b){let b=d.value!==null?a.value[d.value]:null,M=v(a.value.slice()),p=M.length>0&&M[0].dataRef.order.value!==null?M.sort((I,w)=>I.dataRef.order.value-w.dataRef.order.value):Kt(M,I=>B(I.dataRef.domRef)),m=b?p.indexOf(b):null;return m===-1&&(m=null),{options:p,activeOptionIndex:m}}let R=E(()=>e.multiple?1:0),A=E(()=>e.nullable),[S,k]=wn(E(()=>e.modelValue),v=>i("update:modelValue",v),E(()=>e.defaultValue)),F=E(()=>S.value===void 0?ue(R.value,{1:[],0:void 0}):S.value),y=null,_=null;function $(v){return ue(R.value,{0(){return k==null?void 0:k(v)},1:()=>{let b=Z(h.value.value).slice(),M=Z(v),p=b.findIndex(m=>h.compare(M,Z(m)));return p===-1?b.push(M):b.splice(p,1),k==null?void 0:k(b)}})}let x=E(()=>{});J([x],([v],[b])=>{if(h.virtual.value&&v&&b&&d.value!==null){let M=v.indexOf(b[d.value]);M!==-1?d.value=M:d.value=null}});let h={comboboxState:s,value:F,mode:R,compare(v,b){if(typeof e.by=="string"){let M=e.by;return(v==null?void 0:v[M])===(b==null?void 0:b[M])}return e.by===null?Rn(v,b):e.by(v,b)},calculateIndex(v){return h.virtual.value?e.by===null?h.virtual.value.options.indexOf(v):h.virtual.value.options.findIndex(b=>h.compare(b,v)):a.value.findIndex(b=>h.compare(b.dataRef.value,v))},defaultValue:E(()=>e.defaultValue),nullable:A,immediate:E(()=>!1),virtual:E(()=>null),inputRef:r,labelRef:o,buttonRef:l,optionsRef:c,disabled:E(()=>e.disabled),options:a,change(v){k(v)},activeOptionIndex:E(()=>{if(g.value&&d.value===null&&(h.virtual.value?h.virtual.value.options.length>0:a.value.length>0)){if(h.virtual.value){let b=h.virtual.value.options.findIndex(M=>{var p;return!((p=h.virtual.value)!=null&&p.disabled(M))});if(b!==-1)return b}let v=a.value.findIndex(b=>!b.dataRef.disabled);if(v!==-1)return v}return d.value}),activationTrigger:f,optionsPropsRef:u,closeCombobox(){g.value=!1,!e.disabled&&s.value!==1&&(s.value=1,d.value=null)},openCombobox(){if(g.value=!0,!e.disabled&&s.value!==0){if(h.value.value){let v=h.calculateIndex(h.value.value);v!==-1&&(d.value=v)}s.value=0}},setActivationTrigger(v){f.value=v},goToOption(v,b,M){g.value=!1,y!==null&&cancelAnimationFrame(y),y=requestAnimationFrame(()=>{if(e.disabled||c.value&&!u.value.static&&s.value===1)return;if(h.virtual.value){d.value=v===V.Specific?b:qe({focus:v},{resolveItems:()=>h.virtual.value.options,resolveActiveIndex:()=>{var I,w;return(w=(I=h.activeOptionIndex.value)!=null?I:h.virtual.value.options.findIndex(P=>{var D;return!((D=h.virtual.value)!=null&&D.disabled(P))}))!=null?w:null},resolveDisabled:I=>h.virtual.value.disabled(I),resolveId(){throw new Error("Function not implemented.")}}),f.value=M??2;return}let p=O();if(p.activeOptionIndex===null){let I=p.options.findIndex(w=>!w.dataRef.disabled);I!==-1&&(p.activeOptionIndex=I)}let m=v===V.Specific?b:qe({focus:v},{resolveItems:()=>p.options,resolveActiveIndex:()=>p.activeOptionIndex,resolveId:I=>I.id,resolveDisabled:I=>I.dataRef.disabled});d.value=m,f.value=M??2,a.value=p.options})},selectOption(v){let b=a.value.find(p=>p.id===v);if(!b)return;let{dataRef:M}=b;$(M.value)},selectActiveOption(){if(h.activeOptionIndex.value!==null){if(h.virtual.value)$(h.virtual.value.options[h.activeOptionIndex.value]);else{let{dataRef:v}=a.value[h.activeOptionIndex.value];$(v.value)}h.goToOption(V.Specific,h.activeOptionIndex.value)}},registerOption(v,b){let M=Ft({id:v,dataRef:b});if(h.virtual.value){a.value.push(M);return}_&&cancelAnimationFrame(_);let p=O(m=>(m.push(M),m));d.value===null&&h.isSelected(b.value.value)&&(p.activeOptionIndex=p.options.indexOf(M)),a.value=p.options,d.value=p.activeOptionIndex,f.value=2,p.options.some(m=>!B(m.dataRef.domRef))&&(_=requestAnimationFrame(()=>{let m=O();a.value=m.options,d.value=m.activeOptionIndex}))},unregisterOption(v,b){if(y!==null&&cancelAnimationFrame(y),b&&(g.value=!0),h.virtual.value){a.value=a.value.filter(p=>p.id!==v);return}let M=O(p=>{let m=p.findIndex(I=>I.id===v);return m!==-1&&p.splice(m,1),p});a.value=M.options,d.value=M.activeOptionIndex,f.value=2},isSelected(v){return ue(R.value,{0:()=>h.compare(Z(h.value.value),Z(v)),1:()=>Z(h.value.value).some(b=>h.compare(Z(b),Z(v)))})},isActive(v){return d.value===h.calculateIndex(v)}};Lt([r,l,c],()=>h.closeCombobox(),E(()=>s.value===0)),et(bt,h),zt(E(()=>ue(s.value,{0:Se.Open,1:Se.Closed})));let T=E(()=>{var v;return(v=B(r))==null?void 0:v.closest("form")});return ge(()=>{J([T],()=>{if(!T.value||e.defaultValue===void 0)return;function v(){h.change(e.defaultValue)}return T.value.addEventListener("reset",v),()=>{var b;(b=T.value)==null||b.removeEventListener("reset",v)}},{immediate:!0})}),()=>{var v,b,M;let{name:p,disabled:m,form:I,...w}=e,P={open:s.value===0,disabled:m,activeIndex:h.activeOptionIndex.value,activeOption:h.activeOptionIndex.value===null?null:h.virtual.value?h.virtual.value.options[(v=h.activeOptionIndex.value)!=null?v:0]:(M=(b=h.options.value[h.activeOptionIndex.value])==null?void 0:b.dataRef.value)!=null?M:null,value:F.value};return Ie(Oe,[...p!=null&&F.value!=null?vt({[p]:F.value}).map(([D,ie])=>Ie(Nt,Bt({features:Vt.Hidden,key:D,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:I,name:D,value:ie}))):[],Ce({theirProps:{...t,...Be(w,["by","defaultValue","immediate","modelValue","multiple","nullable","onUpdate:modelValue","virtual"])},ourProps:{},slot:P,slots:n,attrs:t,name:"Combobox"})])}}}),Fn=ne({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:null}},emits:{change:e=>!0},setup(e,{emit:n,attrs:t,slots:i,expose:s}){var o;let r=(o=e.id)!=null?o:`headlessui-combobox-input-${Ve()}`,l=be("ComboboxInput"),c=E(()=>Ze(B(l.inputRef))),u={value:!1};s({el:l.inputRef,$el:l.inputRef});function a(){l.change(null);let y=B(l.optionsRef);y&&(y.scrollTop=0),l.goToOption(V.Nothing)}let d=E(()=>{var y;let _=l.value.value;return B(l.inputRef)?typeof e.displayValue<"u"&&_!==void 0?(y=e.displayValue(_))!=null?y:"":typeof _=="string"?_:"":""});ge(()=>{J([d,l.comboboxState,c],([y,_],[$,x])=>{if(u.value)return;let h=B(l.inputRef);h&&((x===0&&_===1||y!==$)&&(h.value=y),requestAnimationFrame(()=>{var T;if(u.value||!h||((T=c.value)==null?void 0:T.activeElement)!==h)return;let{selectionStart:v,selectionEnd:b}=h;Math.abs((b??0)-(v??0))===0&&v===0&&h.setSelectionRange(h.value.length,h.value.length)}))},{immediate:!0}),J([l.comboboxState],([y],[_])=>{if(y===0&&_===1){if(u.value)return;let $=B(l.inputRef);if(!$)return;let x=$.value,{selectionStart:h,selectionEnd:T,selectionDirection:v}=$;$.value="",$.value=x,v!==null?$.setSelectionRange(h,T,v):$.setSelectionRange(h,T)}})});let f=N(!1);function g(){f.value=!0}function O(){Ke().nextFrame(()=>{f.value=!1})}function R(y){switch(u.value=!0,y.key){case Q.Enter:if(u.value=!1,l.comboboxState.value!==0||f.value)return;if(y.preventDefault(),y.stopPropagation(),l.activeOptionIndex.value===null){l.closeCombobox();return}l.selectActiveOption(),l.mode.value===0&&l.closeCombobox();break;case Q.ArrowDown:return u.value=!1,y.preventDefault(),y.stopPropagation(),ue(l.comboboxState.value,{0:()=>l.goToOption(V.Next),1:()=>l.openCombobox()});case Q.ArrowUp:return u.value=!1,y.preventDefault(),y.stopPropagation(),ue(l.comboboxState.value,{0:()=>l.goToOption(V.Previous),1:()=>{l.openCombobox(),nt(()=>{l.value.value||l.goToOption(V.Last)})}});case Q.Home:if(y.shiftKey)break;return u.value=!1,y.preventDefault(),y.stopPropagation(),l.goToOption(V.First);case Q.PageUp:return u.value=!1,y.preventDefault(),y.stopPropagation(),l.goToOption(V.First);case Q.End:if(y.shiftKey)break;return u.value=!1,y.preventDefault(),y.stopPropagation(),l.goToOption(V.Last);case Q.PageDown:return u.value=!1,y.preventDefault(),y.stopPropagation(),l.goToOption(V.Last);case Q.Escape:if(u.value=!1,l.comboboxState.value!==0)return;y.preventDefault(),l.optionsRef.value&&!l.optionsPropsRef.value.static&&y.stopPropagation(),l.nullable.value&&l.mode.value===0&&l.value.value===null&&a(),l.closeCombobox();break;case Q.Tab:if(u.value=!1,l.comboboxState.value!==0)return;l.mode.value===0&&l.activationTrigger.value!==1&&l.selectActiveOption(),l.closeCombobox();break}}function A(y){n("change",y),l.nullable.value&&l.mode.value===0&&y.target.value===""&&a(),l.openCombobox()}function S(y){var _,$,x;let h=(_=y.relatedTarget)!=null?_:Ue.find(T=>T!==y.currentTarget);if(u.value=!1,!(($=B(l.optionsRef))!=null&&$.contains(h))&&!((x=B(l.buttonRef))!=null&&x.contains(h))&&l.comboboxState.value===0)return y.preventDefault(),l.mode.value===0&&(l.nullable.value&&l.value.value===null?a():l.activationTrigger.value!==1&&l.selectActiveOption()),l.closeCombobox()}function k(y){var _,$,x;let h=(_=y.relatedTarget)!=null?_:Ue.find(T=>T!==y.currentTarget);($=B(l.buttonRef))!=null&&$.contains(h)||(x=B(l.optionsRef))!=null&&x.contains(h)||l.disabled.value||l.immediate.value&&l.comboboxState.value!==0&&(l.openCombobox(),Ke().nextFrame(()=>{l.setActivationTrigger(1)}))}let F=E(()=>{var y,_,$,x;return(x=($=(_=e.defaultValue)!=null?_:l.defaultValue.value!==void 0?(y=e.displayValue)==null?void 0:y.call(e,l.defaultValue.value):null)!=null?$:l.defaultValue.value)!=null?x:""});return()=>{var y,_,$,x,h,T,v;let b={open:l.comboboxState.value===0},{displayValue:M,onChange:p,...m}=e,I={"aria-controls":(y=l.optionsRef.value)==null?void 0:y.id,"aria-expanded":l.comboboxState.value===0,"aria-activedescendant":l.activeOptionIndex.value===null?void 0:l.virtual.value?(_=l.options.value.find(w=>!l.virtual.value.disabled(w.dataRef.value)&&l.compare(w.dataRef.value,l.virtual.value.options[l.activeOptionIndex.value])))==null?void 0:_.id:($=l.options.value[l.activeOptionIndex.value])==null?void 0:$.id,"aria-labelledby":(T=(x=B(l.labelRef))==null?void 0:x.id)!=null?T:(h=B(l.buttonRef))==null?void 0:h.id,"aria-autocomplete":"list",id:r,onCompositionstart:g,onCompositionend:O,onKeydown:R,onInput:A,onFocus:k,onBlur:S,role:"combobox",type:(v=t.type)!=null?v:"text",tabIndex:0,ref:l.inputRef,defaultValue:F.value,disabled:l.disabled.value===!0?!0:void 0};return Ce({ourProps:I,theirProps:m,slot:b,attrs:t,slots:i,features:we.RenderStrategy|we.Static,name:"ComboboxInput"})}}}),Ln=ne({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(e,{attrs:n,slots:t,expose:i}){let s=be("ComboboxOptions"),o=`headlessui-combobox-options-${Ve()}`;i({el:s.optionsRef,$el:s.optionsRef}),me(()=>{s.optionsPropsRef.value.static=e.static}),me(()=>{s.optionsPropsRef.value.hold=e.hold});let r=Dt(),l=E(()=>r!==null?(r.value&Se.Open)===Se.Open:s.comboboxState.value===0);return En({container:E(()=>B(s.optionsRef)),enabled:E(()=>s.comboboxState.value===0),accept(c){return c.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:c.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(c){c.setAttribute("role","none")}}),()=>{var c,u,a;let d={open:s.comboboxState.value===0},f={"aria-labelledby":(a=(c=B(s.labelRef))==null?void 0:c.id)!=null?a:(u=B(s.buttonRef))==null?void 0:u.id,id:o,ref:s.optionsRef,role:"listbox","aria-multiselectable":s.mode.value===1?!0:void 0},g=Be(e,["hold"]);return Ce({ourProps:f,theirProps:g,slot:d,attrs:n,slots:s.virtual.value&&s.comboboxState.value===0?{...t,default:()=>[Ie(_n,{},t.default)]}:t,features:we.RenderStrategy|we.Static,visible:l.value,name:"ComboboxOptions"})}}}),zn=ne({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},order:{type:[Number],default:null}},setup(e,{slots:n,attrs:t,expose:i}){let s=be("ComboboxOption"),o=`headlessui-combobox-option-${Ve()}`,r=N(null);i({el:r,$el:r});let l=E(()=>{var S;return s.virtual.value?s.activeOptionIndex.value===s.calculateIndex(e.value):s.activeOptionIndex.value===null?!1:((S=s.options.value[s.activeOptionIndex.value])==null?void 0:S.id)===o}),c=E(()=>s.isSelected(e.value)),u=tt(yt,null),a=E(()=>({disabled:e.disabled,value:e.value,domRef:r,order:E(()=>e.order)}));ge(()=>s.registerOption(o,a)),Ut(()=>s.unregisterOption(o,l.value)),me(()=>{let S=B(r);S&&(u==null||u.value.measureElement(S))}),me(()=>{s.comboboxState.value===0&&l.value&&(s.virtual.value||s.activationTrigger.value!==0&&nt(()=>{var S,k;return(k=(S=B(r))==null?void 0:S.scrollIntoView)==null?void 0:k.call(S,{block:"nearest"})}))});function d(S){var k;if(e.disabled||(k=s.virtual.value)!=null&&k.disabled(e.value))return S.preventDefault();s.selectOption(o),Ht()||requestAnimationFrame(()=>{var F;return(F=B(s.inputRef))==null?void 0:F.focus({preventScroll:!0})}),s.mode.value===0&&requestAnimationFrame(()=>s.closeCombobox())}function f(){var S;if(e.disabled||(S=s.virtual.value)!=null&&S.disabled(e.value))return s.goToOption(V.Nothing);let k=s.calculateIndex(e.value);s.goToOption(V.Specific,k)}let g=Mn();function O(S){g.update(S)}function R(S){var k;if(!g.wasMoved(S)||e.disabled||(k=s.virtual.value)!=null&&k.disabled(e.value)||l.value)return;let F=s.calculateIndex(e.value);s.goToOption(V.Specific,F,0)}function A(S){var k;g.wasMoved(S)&&(e.disabled||(k=s.virtual.value)!=null&&k.disabled(e.value)||l.value&&(s.optionsPropsRef.value.hold||s.goToOption(V.Nothing)))}return()=>{let{disabled:S}=e,k={active:l.value,selected:c.value,disabled:S},F={id:o,ref:r,role:"option",tabIndex:S===!0?void 0:-1,"aria-disabled":S===!0?!0:void 0,"aria-selected":c.value,disabled:void 0,onClick:d,onFocus:f,onPointerenter:O,onMouseenter:O,onPointermove:R,onMousemove:R,onPointerleave:A,onMouseleave:A},y=Be(e,["order","value"]);return Ce({ourProps:F,theirProps:y,slot:k,attrs:t,slots:n,name:"ComboboxOption"})}}});function X(e){return Array.isArray?Array.isArray(e):It(e)==="[object Array]"}const Nn=1/0;function Bn(e){if(typeof e=="string")return e;let n=e+"";return n=="0"&&1/e==-Nn?"-0":n}function Vn(e){return e==null?"":Bn(e)}function Y(e){return typeof e=="string"}function xt(e){return typeof e=="number"}function Dn(e){return e===!0||e===!1||jn(e)&&It(e)=="[object Boolean]"}function St(e){return typeof e=="object"}function jn(e){return St(e)&&e!==null}function K(e){return e!=null}function $e(e){return!e.trim().length}function It(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Kn="Incorrect 'index' type",Un=e=>`Invalid value for key ${e}`,Hn=e=>`Pattern length exceeds max of ${e}.`,Wn=e=>`Missing ${e} property in key`,qn=e=>`Property 'weight' in key '${e}' must be a positive integer`,Ge=Object.prototype.hasOwnProperty;class Gn{constructor(n){this._keys=[],this._keyMap={};let t=0;n.forEach(i=>{let s=Ot(i);t+=s.weight,this._keys.push(s),this._keyMap[s.id]=s,t+=s.weight}),this._keys.forEach(i=>{i.weight/=t})}get(n){return this._keyMap[n]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Ot(e){let n=null,t=null,i=null,s=1,o=null;if(Y(e)||X(e))i=e,n=Ye(e),t=_e(e);else{if(!Ge.call(e,"name"))throw new Error(Wn("name"));const r=e.name;if(i=r,Ge.call(e,"weight")&&(s=e.weight,s<=0))throw new Error(qn(r));n=Ye(r),t=_e(r),o=e.getFn}return{path:n,id:t,weight:s,src:i,getFn:o}}function Ye(e){return X(e)?e:e.split(".")}function _e(e){return X(e)?e.join("."):e}function Yn(e,n){let t=[],i=!1;const s=(o,r,l)=>{if(K(o))if(!r[l])t.push(o);else{let c=r[l];const u=o[c];if(!K(u))return;if(l===r.length-1&&(Y(u)||xt(u)||Dn(u)))t.push(Vn(u));else if(X(u)){i=!0;for(let a=0,d=u.length;a<d;a+=1)s(u[a],r,l+1)}else r.length&&s(u,r,l+1)}};return s(e,Y(n)?n.split("."):n,0),i?t:t[0]}const Jn={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Qn={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,n)=>e.score===n.score?e.idx<n.idx?-1:1:e.score<n.score?-1:1},Xn={location:0,threshold:.6,distance:100},Zn={useExtendedSearch:!1,getFn:Yn,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var C={...Qn,...Jn,...Xn,...Zn};const es=/[^ ]+/g;function ts(e=1,n=3){const t=new Map,i=Math.pow(10,n);return{get(s){const o=s.match(es).length;if(t.has(o))return t.get(o);const r=1/Math.pow(o,.5*e),l=parseFloat(Math.round(r*i)/i);return t.set(o,l),l},clear(){t.clear()}}}class De{constructor({getFn:n=C.getFn,fieldNormWeight:t=C.fieldNormWeight}={}){this.norm=ts(t,3),this.getFn=n,this.isCreated=!1,this.setIndexRecords()}setSources(n=[]){this.docs=n}setIndexRecords(n=[]){this.records=n}setKeys(n=[]){this.keys=n,this._keysMap={},n.forEach((t,i)=>{this._keysMap[t.id]=i})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Y(this.docs[0])?this.docs.forEach((n,t)=>{this._addString(n,t)}):this.docs.forEach((n,t)=>{this._addObject(n,t)}),this.norm.clear())}add(n){const t=this.size();Y(n)?this._addString(n,t):this._addObject(n,t)}removeAt(n){this.records.splice(n,1);for(let t=n,i=this.size();t<i;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(n,t){return n[this._keysMap[t]]}size(){return this.records.length}_addString(n,t){if(!K(n)||$e(n))return;let i={v:n,i:t,n:this.norm.get(n)};this.records.push(i)}_addObject(n,t){let i={i:t,$:{}};this.keys.forEach((s,o)=>{let r=s.getFn?s.getFn(n):this.getFn(n,s.path);if(K(r)){if(X(r)){let l=[];const c=[{nestedArrIndex:-1,value:r}];for(;c.length;){const{nestedArrIndex:u,value:a}=c.pop();if(K(a))if(Y(a)&&!$e(a)){let d={v:a,i:u,n:this.norm.get(a)};l.push(d)}else X(a)&&a.forEach((d,f)=>{c.push({nestedArrIndex:f,value:d})})}i.$[o]=l}else if(Y(r)&&!$e(r)){let l={v:r,n:this.norm.get(r)};i.$[o]=l}}}),this.records.push(i)}toJSON(){return{keys:this.keys,records:this.records}}}function wt(e,n,{getFn:t=C.getFn,fieldNormWeight:i=C.fieldNormWeight}={}){const s=new De({getFn:t,fieldNormWeight:i});return s.setKeys(e.map(Ot)),s.setSources(n),s.create(),s}function ns(e,{getFn:n=C.getFn,fieldNormWeight:t=C.fieldNormWeight}={}){const{keys:i,records:s}=e,o=new De({getFn:n,fieldNormWeight:t});return o.setKeys(i),o.setIndexRecords(s),o}function xe(e,{errors:n=0,currentLocation:t=0,expectedLocation:i=0,distance:s=C.distance,ignoreLocation:o=C.ignoreLocation}={}){const r=n/e.length;if(o)return r;const l=Math.abs(i-t);return s?r+l/s:l?1:r}function ss(e=[],n=C.minMatchCharLength){let t=[],i=-1,s=-1,o=0;for(let r=e.length;o<r;o+=1){let l=e[o];l&&i===-1?i=o:!l&&i!==-1&&(s=o-1,s-i+1>=n&&t.push([i,s]),i=-1)}return e[o-1]&&o-i>=n&&t.push([i,o-1]),t}const le=32;function is(e,n,t,{location:i=C.location,distance:s=C.distance,threshold:o=C.threshold,findAllMatches:r=C.findAllMatches,minMatchCharLength:l=C.minMatchCharLength,includeMatches:c=C.includeMatches,ignoreLocation:u=C.ignoreLocation}={}){if(n.length>le)throw new Error(Hn(le));const a=n.length,d=e.length,f=Math.max(0,Math.min(i,d));let g=o,O=f;const R=l>1||c,A=R?Array(d):[];let S;for(;(S=e.indexOf(n,O))>-1;){let x=xe(n,{currentLocation:S,expectedLocation:f,distance:s,ignoreLocation:u});if(g=Math.min(x,g),O=S+a,R){let h=0;for(;h<a;)A[S+h]=1,h+=1}}O=-1;let k=[],F=1,y=a+d;const _=1<<a-1;for(let x=0;x<a;x+=1){let h=0,T=y;for(;h<T;)xe(n,{errors:x,currentLocation:f+T,expectedLocation:f,distance:s,ignoreLocation:u})<=g?h=T:y=T,T=Math.floor((y-h)/2+h);y=T;let v=Math.max(1,f-T+1),b=r?d:Math.min(f+T,d)+a,M=Array(b+2);M[b+1]=(1<<x)-1;for(let m=b;m>=v;m-=1){let I=m-1,w=t[e.charAt(I)];if(R&&(A[I]=+!!w),M[m]=(M[m+1]<<1|1)&w,x&&(M[m]|=(k[m+1]|k[m])<<1|1|k[m+1]),M[m]&_&&(F=xe(n,{errors:x,currentLocation:I,expectedLocation:f,distance:s,ignoreLocation:u}),F<=g)){if(g=F,O=I,O<=f)break;v=Math.max(1,2*f-O)}}if(xe(n,{errors:x+1,currentLocation:f,expectedLocation:f,distance:s,ignoreLocation:u})>g)break;k=M}const $={isMatch:O>=0,score:Math.max(.001,F)};if(R){const x=ss(A,l);x.length?c&&($.indices=x):$.isMatch=!1}return $}function os(e){let n={};for(let t=0,i=e.length;t<i;t+=1){const s=e.charAt(t);n[s]=(n[s]||0)|1<<i-t-1}return n}class Mt{constructor(n,{location:t=C.location,threshold:i=C.threshold,distance:s=C.distance,includeMatches:o=C.includeMatches,findAllMatches:r=C.findAllMatches,minMatchCharLength:l=C.minMatchCharLength,isCaseSensitive:c=C.isCaseSensitive,ignoreLocation:u=C.ignoreLocation}={}){if(this.options={location:t,threshold:i,distance:s,includeMatches:o,findAllMatches:r,minMatchCharLength:l,isCaseSensitive:c,ignoreLocation:u},this.pattern=c?n:n.toLowerCase(),this.chunks=[],!this.pattern.length)return;const a=(f,g)=>{this.chunks.push({pattern:f,alphabet:os(f),startIndex:g})},d=this.pattern.length;if(d>le){let f=0;const g=d%le,O=d-g;for(;f<O;)a(this.pattern.substr(f,le),f),f+=le;if(g){const R=d-le;a(this.pattern.substr(R),R)}}else a(this.pattern,0)}searchIn(n){const{isCaseSensitive:t,includeMatches:i}=this.options;if(t||(n=n.toLowerCase()),this.pattern===n){let O={isMatch:!0,score:0};return i&&(O.indices=[[0,n.length-1]]),O}const{location:s,distance:o,threshold:r,findAllMatches:l,minMatchCharLength:c,ignoreLocation:u}=this.options;let a=[],d=0,f=!1;this.chunks.forEach(({pattern:O,alphabet:R,startIndex:A})=>{const{isMatch:S,score:k,indices:F}=is(n,O,R,{location:s+A,distance:o,threshold:r,findAllMatches:l,minMatchCharLength:c,includeMatches:i,ignoreLocation:u});S&&(f=!0),d+=k,S&&F&&(a=[...a,...F])});let g={isMatch:f,score:f?d/this.chunks.length:1};return f&&i&&(g.indices=a),g}}class se{constructor(n){this.pattern=n}static isMultiMatch(n){return Je(n,this.multiRegex)}static isSingleMatch(n){return Je(n,this.singleRegex)}search(){}}function Je(e,n){const t=e.match(n);return t?t[1]:null}class ls extends se{constructor(n){super(n)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(n){const t=n===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class rs extends se{constructor(n){super(n)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(n){const i=n.indexOf(this.pattern)===-1;return{isMatch:i,score:i?0:1,indices:[0,n.length-1]}}}class as extends se{constructor(n){super(n)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(n){const t=n.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class us extends se{constructor(n){super(n)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(n){const t=!n.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,n.length-1]}}}class cs extends se{constructor(n){super(n)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(n){const t=n.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[n.length-this.pattern.length,n.length-1]}}}class ds extends se{constructor(n){super(n)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(n){const t=!n.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,n.length-1]}}}class Et extends se{constructor(n,{location:t=C.location,threshold:i=C.threshold,distance:s=C.distance,includeMatches:o=C.includeMatches,findAllMatches:r=C.findAllMatches,minMatchCharLength:l=C.minMatchCharLength,isCaseSensitive:c=C.isCaseSensitive,ignoreLocation:u=C.ignoreLocation}={}){super(n),this._bitapSearch=new Mt(n,{location:t,threshold:i,distance:s,includeMatches:o,findAllMatches:r,minMatchCharLength:l,isCaseSensitive:c,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(n){return this._bitapSearch.searchIn(n)}}class kt extends se{constructor(n){super(n)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(n){let t=0,i;const s=[],o=this.pattern.length;for(;(i=n.indexOf(this.pattern,t))>-1;)t=i+o,s.push([i,t-1]);const r=!!s.length;return{isMatch:r,score:r?0:1,indices:s}}}const Pe=[ls,kt,as,us,ds,cs,rs,Et],Qe=Pe.length,hs=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,fs="|";function ps(e,n={}){return e.split(fs).map(t=>{let i=t.trim().split(hs).filter(o=>o&&!!o.trim()),s=[];for(let o=0,r=i.length;o<r;o+=1){const l=i[o];let c=!1,u=-1;for(;!c&&++u<Qe;){const a=Pe[u];let d=a.isMultiMatch(l);d&&(s.push(new a(d,n)),c=!0)}if(!c)for(u=-1;++u<Qe;){const a=Pe[u];let d=a.isSingleMatch(l);if(d){s.push(new a(d,n));break}}}return s})}const vs=new Set([Et.type,kt.type]);class ms{constructor(n,{isCaseSensitive:t=C.isCaseSensitive,includeMatches:i=C.includeMatches,minMatchCharLength:s=C.minMatchCharLength,ignoreLocation:o=C.ignoreLocation,findAllMatches:r=C.findAllMatches,location:l=C.location,threshold:c=C.threshold,distance:u=C.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:i,minMatchCharLength:s,findAllMatches:r,ignoreLocation:o,location:l,threshold:c,distance:u},this.pattern=t?n:n.toLowerCase(),this.query=ps(this.pattern,this.options)}static condition(n,t){return t.useExtendedSearch}searchIn(n){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:i,isCaseSensitive:s}=this.options;n=s?n:n.toLowerCase();let o=0,r=[],l=0;for(let c=0,u=t.length;c<u;c+=1){const a=t[c];r.length=0,o=0;for(let d=0,f=a.length;d<f;d+=1){const g=a[d],{isMatch:O,indices:R,score:A}=g.search(n);if(O){if(o+=1,l+=A,i){const S=g.constructor.type;vs.has(S)?r=[...r,...R]:r.push(R)}}else{l=0,o=0,r.length=0;break}}if(o){let d={isMatch:!0,score:l/o};return i&&(d.indices=r),d}}return{isMatch:!1,score:1}}}const Fe=[];function gs(...e){Fe.push(...e)}function Le(e,n){for(let t=0,i=Fe.length;t<i;t+=1){let s=Fe[t];if(s.condition(e,n))return new s(e,n)}return new Mt(e,n)}const ke={AND:"$and",OR:"$or"},ze={PATH:"$path",PATTERN:"$val"},Ne=e=>!!(e[ke.AND]||e[ke.OR]),bs=e=>!!e[ze.PATH],ys=e=>!X(e)&&St(e)&&!Ne(e),Xe=e=>({[ke.AND]:Object.keys(e).map(n=>({[n]:e[n]}))});function Ct(e,n,{auto:t=!0}={}){const i=s=>{let o=Object.keys(s);const r=bs(s);if(!r&&o.length>1&&!Ne(s))return i(Xe(s));if(ys(s)){const c=r?s[ze.PATH]:o[0],u=r?s[ze.PATTERN]:s[c];if(!Y(u))throw new Error(Un(c));const a={keyId:_e(c),pattern:u};return t&&(a.searcher=Le(u,n)),a}let l={children:[],operator:o[0]};return o.forEach(c=>{const u=s[c];X(u)&&u.forEach(a=>{l.children.push(i(a))})}),l};return Ne(e)||(e=Xe(e)),i(e)}function xs(e,{ignoreFieldNorm:n=C.ignoreFieldNorm}){e.forEach(t=>{let i=1;t.matches.forEach(({key:s,norm:o,score:r})=>{const l=s?s.weight:null;i*=Math.pow(r===0&&l?Number.EPSILON:r,(l||1)*(n?1:o))}),t.score=i})}function Ss(e,n){const t=e.matches;n.matches=[],K(t)&&t.forEach(i=>{if(!K(i.indices)||!i.indices.length)return;const{indices:s,value:o}=i;let r={indices:s,value:o};i.key&&(r.key=i.key.src),i.idx>-1&&(r.refIndex=i.idx),n.matches.push(r)})}function Is(e,n){n.score=e.score}function Os(e,n,{includeMatches:t=C.includeMatches,includeScore:i=C.includeScore}={}){const s=[];return t&&s.push(Ss),i&&s.push(Is),e.map(o=>{const{idx:r}=o,l={item:n[r],refIndex:r};return s.length&&s.forEach(c=>{c(o,l)}),l})}class he{constructor(n,t={},i){this.options={...C,...t},this.options.useExtendedSearch,this._keyStore=new Gn(this.options.keys),this.setCollection(n,i)}setCollection(n,t){if(this._docs=n,t&&!(t instanceof De))throw new Error(Kn);this._myIndex=t||wt(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(n){K(n)&&(this._docs.push(n),this._myIndex.add(n))}remove(n=()=>!1){const t=[];for(let i=0,s=this._docs.length;i<s;i+=1){const o=this._docs[i];n(o,i)&&(this.removeAt(i),i-=1,s-=1,t.push(o))}return t}removeAt(n){this._docs.splice(n,1),this._myIndex.removeAt(n)}getIndex(){return this._myIndex}search(n,{limit:t=-1}={}){const{includeMatches:i,includeScore:s,shouldSort:o,sortFn:r,ignoreFieldNorm:l}=this.options;let c=Y(n)?Y(this._docs[0])?this._searchStringList(n):this._searchObjectList(n):this._searchLogical(n);return xs(c,{ignoreFieldNorm:l}),o&&c.sort(r),xt(t)&&t>-1&&(c=c.slice(0,t)),Os(c,this._docs,{includeMatches:i,includeScore:s})}_searchStringList(n){const t=Le(n,this.options),{records:i}=this._myIndex,s=[];return i.forEach(({v:o,i:r,n:l})=>{if(!K(o))return;const{isMatch:c,score:u,indices:a}=t.searchIn(o);c&&s.push({item:o,idx:r,matches:[{score:u,value:o,norm:l,indices:a}]})}),s}_searchLogical(n){const t=Ct(n,this.options),i=(l,c,u)=>{if(!l.children){const{keyId:d,searcher:f}=l,g=this._findMatches({key:this._keyStore.get(d),value:this._myIndex.getValueForItemAtKeyId(c,d),searcher:f});return g&&g.length?[{idx:u,item:c,matches:g}]:[]}const a=[];for(let d=0,f=l.children.length;d<f;d+=1){const g=l.children[d],O=i(g,c,u);if(O.length)a.push(...O);else if(l.operator===ke.AND)return[]}return a},s=this._myIndex.records,o={},r=[];return s.forEach(({$:l,i:c})=>{if(K(l)){let u=i(t,l,c);u.length&&(o[c]||(o[c]={idx:c,item:l,matches:[]},r.push(o[c])),u.forEach(({matches:a})=>{o[c].matches.push(...a)}))}}),r}_searchObjectList(n){const t=Le(n,this.options),{keys:i,records:s}=this._myIndex,o=[];return s.forEach(({$:r,i:l})=>{if(!K(r))return;let c=[];i.forEach((u,a)=>{c.push(...this._findMatches({key:u,value:r[a],searcher:t}))}),c.length&&o.push({idx:l,item:r,matches:c})}),o}_findMatches({key:n,value:t,searcher:i}){if(!K(t))return[];let s=[];if(X(t))t.forEach(({v:o,i:r,n:l})=>{if(!K(o))return;const{isMatch:c,score:u,indices:a}=i.searchIn(o);c&&s.push({score:u,key:n,value:o,idx:r,norm:l,indices:a})});else{const{v:o,n:r}=t,{isMatch:l,score:c,indices:u}=i.searchIn(o);l&&s.push({score:c,key:n,value:o,norm:r,indices:u})}return s}}he.version="6.6.2";he.createIndex=wt;he.parseIndex=ns;he.config=C;he.parseQuery=Ct;gs(ms);function ws(e,n,t){const i=()=>{var r,l;return new he((r=q(n))!=null?r:[],(l=q(t))==null?void 0:l.fuseOptions)},s=N(i());J(()=>{var r;return(r=q(t))==null?void 0:r.fuseOptions},()=>{s.value=i()},{deep:!0}),J(()=>q(n),r=>{s.value.setCollection(r)},{deep:!0});const o=E(()=>{const r=q(t);if(r!=null&&r.matchAllWhenSearchEmpty&&!q(e))return q(n).map((c,u)=>({item:c,refIndex:u}));const l=r==null?void 0:r.resultLimit;return s.value.search(q(e),l?{limit:l}:void 0)});return{fuse:s,results:o}}const Ms=ne({components:{HComboboxOption:zn,UIcon:Re,UAvatar:it,UKbd:ht},props:{group:{type:Object,required:!0},query:{type:String,default:""},groupAttribute:{type:String,required:!0},commandAttribute:{type:String,required:!0},selectedIcon:{type:String,required:!0},ui:{type:Object,required:!0}},setup(e){const n=E(()=>{const i=e.group[e.groupAttribute];return typeof i=="function"?i(e.query):i});function t(i,{indices:s,value:o}){if(i===o)return"";let r="",l=0;s.forEach(u=>{const a=u[1]+1,d=a-u[0]>=e.query.length;r+=[o.substring(l,u[0]),d&&"<mark>",o.substring(u[0],a),d&&"</mark>"].filter(Boolean).join(""),l=a}),r+=o.substring(l);const c=r.indexOf("<mark>");return c>60&&(r=`...${r.substring(c-60)}`),r}return ot(()=>lt("$xnpcKX55nb")),{label:n,highlight:t}}}),Es=["aria-label"],ks=["innerHTML"];function Cs(e,n,t,i,s,o){const r=Re,l=it,c=ht,u=ve("HComboboxOption");return L(),U("div",{class:z(e.ui.group.wrapper)},[e.label?(L(),U("h2",{key:0,class:z(e.ui.group.label)},ee(e.label),3)):G("",!0),te("div",{class:z(e.ui.group.container),"aria-label":e.group[e.groupAttribute]},[(L(!0),U(Oe,null,Me(e.group.commands,(a,d)=>(L(),H(u,{key:`${e.group.key}-${d}`,value:a,disabled:a.disabled,as:"template"},{default:de(({active:f,selected:g})=>[te("div",{class:z([e.ui.group.command.base,f?e.ui.group.command.active:e.ui.group.command.inactive,a.disabled?"cursor-not-allowed":"cursor-pointer"])},[te("div",{class:z(e.ui.group.command.container)},[ce(e.$slots,`${e.group.key}-icon`,{group:e.group,command:a,active:f,selected:g},()=>[a.icon?(L(),H(r,{key:0,name:a.icon,class:z([e.ui.group.command.icon.base,f?e.ui.group.command.icon.active:e.ui.group.command.icon.inactive,a.iconClass]),"aria-hidden":"true"},null,8,["name","class"])):a.avatar?(L(),H(l,Ee({key:1},{size:e.ui.group.command.avatar.size,...a.avatar},{class:e.ui.group.command.avatar.base,"aria-hidden":"true"}),null,16,["class"])):a.chip?(L(),U("span",{key:2,class:z(e.ui.group.command.chip.base),style:Wt({background:`#${a.chip}`})},null,6)):G("",!0)]),te("div",{class:z([e.ui.group.command.label,a.disabled&&e.ui.group.command.disabled])},[ce(e.$slots,`${e.group.key}-command`,{group:e.group,command:a,active:f,selected:g},()=>{var O,R;return[a.prefix?(L(),U("span",{key:0,class:z(["flex-shrink-0",a.prefixClass||e.ui.group.command.prefix])},ee(a.prefix),3)):G("",!0),te("span",{class:z(["truncate",{"flex-none":a.suffix||((O=a.matches)==null?void 0:O.length)}])},ee(a[e.commandAttribute]),3),(R=a.matches)!=null&&R.length?(L(),U("span",{key:1,class:z(["truncate",a.suffixClass||e.ui.group.command.suffix]),innerHTML:e.highlight(a[e.commandAttribute],a.matches[0])},null,10,ks)):a.suffix?(L(),U("span",{key:2,class:z(["truncate",a.suffixClass||e.ui.group.command.suffix])},ee(a.suffix),3)):G("",!0)]})],2)],2),g?(L(),H(r,{key:0,name:e.selectedIcon,class:z(e.ui.group.command.selectedIcon.base),"aria-hidden":"true"},null,8,["name","class"])):f&&(e.group.active||e.$slots[`${e.group.key}-active`])?ce(e.$slots,`${e.group.key}-active`,{key:1,group:e.group,command:a,active:f,selected:g},()=>[e.group.active?(L(),U("span",{key:0,class:z(e.ui.group.active)},ee(e.group.active),3)):G("",!0)]):ce(e.$slots,`${e.group.key}-inactive`,{key:2,group:e.group,command:a,active:f,selected:g},()=>{var O;return[(O=a.shortcuts)!=null&&O.length?(L(),U("span",{key:0,class:z(e.ui.group.command.shortcuts)},[(L(!0),U(Oe,null,Me(a.shortcuts,R=>(L(),H(c,{key:R},{default:de(()=>[qt(ee(R),1)]),_:2},1024))),128))],2)):!a.disabled&&e.group.inactive?(L(),U("span",{key:1,class:z(e.ui.group.inactive)},ee(e.group.inactive),3)):G("",!0)]})],2)]),_:2},1032,["value","disabled"]))),128))],10,Es)],2)}const Rs=st(Ms,[["render",Cs]]),ae=Gt(He.ui.strategy,He.ui.commandPalette,hn),Ts=ne({components:{HCombobox:Pn,HComboboxInput:Fn,HComboboxOptions:Ln,UIcon:Re,UButton:rt,CommandPaletteGroup:Rs},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object,Array],default:null},by:{type:String,default:"id"},multiple:{type:Boolean,default:!1},nullable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},groups:{type:Array,default:()=>[]},icon:{type:String,default:()=>ae.default.icon},loadingIcon:{type:String,default:()=>ae.default.loadingIcon},selectedIcon:{type:String,default:()=>ae.default.selectedIcon},closeButton:{type:Object,default:()=>ae.default.closeButton},emptyState:{type:Object,default:()=>ae.default.emptyState},placeholder:{type:String,default:"Search..."},groupAttribute:{type:String,default:"label"},commandAttribute:{type:String,default:"label"},autoselect:{type:Boolean,default:!0},autoclear:{type:Boolean,default:!0},debounce:{type:Number,default:200},fuse:{type:Object,default:()=>({})},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","close"],setup(e,{emit:n,expose:t}){const{ui:i,attrs:s}=at("commandPalette",Ae(e,"ui"),ae,Ae(e,"class")),o=N(""),r=N(),l=N(null),c=N(!1);ge(()=>{e.autoselect&&y()}),ge(()=>{setTimeout(()=>{var T;const x=(T=r.value)==null?void 0:T.$.provides;if(!x)return;const h=Object.getOwnPropertySymbols(x);l.value=h.length&&x[h[0]]},200)});const u=E(()=>ut({},e.fuse,{fuseOptions:{keys:[e.commandAttribute]},resultLimit:12,matchAllWhenSearchEmpty:!0})),a=E(()=>{var h;const x=[];for(const T of e.groups)T.search||x.push(...((h=T.commands)==null?void 0:h.map(v=>({...v,group:T.key})))||[]);return x}),d=N({}),{results:f}=ws(o,a,u);function g(x,h){if(x)return x.filter&&typeof x.filter=="function"&&(h=x.filter(o.value,h)),{...x,commands:h.slice(0,u.value.resultLimit)}}const O=E(()=>{if(!f.value)return[];const x=f.value.reduce((v,b)=>{var m;const{item:M,...p}=b;return M.group&&(v[m=M.group]||(v[m]=[]),v[M.group].push({...M,...p})),v},{}),h=Object.entries(x).map(([v,b])=>{const M=e.groups.find(p=>p.key===v);return M?g(M,b):null}).filter(Boolean),T=e.groups.filter(v=>{var b;return!!v.search&&((b=d.value[v.key])==null?void 0:b.length)}).map(v=>{const b=d.value[v.key]||[];return g(v,[...b])});return[...h,...T]}),R=ct(async()=>{const x=e.groups.filter(h=>!!h.search);x.length&&(c.value=!0,await Promise.all(x.map(async h=>{d.value[h.key]=await h.search(o.value)})),c.value=!1,F())},e.debounce);J(o,()=>{R(),F()});const A=E(()=>(e.loading||c.value)&&e.loadingIcon?e.loadingIcon:e.icon),S=E(()=>Yt(i.value.input.icon.base,i.value.input.icon.size,(e.loading||c.value)&&e.loadingIcon&&i.value.input.icon.loading)),k=E(()=>({...i.value.default.emptyState,...e.emptyState}));function F(){setTimeout(()=>{var x;(x=r.value)==null||x.$el.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))},0)}function y(){setTimeout(()=>{var x;(x=r.value)==null||x.$el.dispatchEvent(new KeyboardEvent("keydown",{key:"ArrowDown"}))},0)}function _(x){n("update:modelValue",x,{query:o.value}),e.autoclear&&setTimeout(()=>{o.value=""},0)}function $(){o.value?o.value="":n("close")}return t({query:o,updateQuery:x=>{o.value=x},comboboxApi:l,results:f}),ot(()=>lt("$JhxQMScl9J")),{ui:i,attrs:s,groups:O,comboboxInput:r,query:o,iconName:A,iconClass:S,emptyState:k,onSelect:_,onClear:$}}});function $s(e,n,t,i,s,o){const r=Re,l=ve("HComboboxInput"),c=rt,u=ve("CommandPaletteGroup"),a=ve("HComboboxOptions"),d=ve("HCombobox");return L(),H(d,Ee({by:e.by,"model-value":e.modelValue,multiple:e.multiple,nullable:e.nullable,class:e.ui.wrapper},e.attrs,{as:"div","onUpdate:modelValue":e.onSelect}),{default:de(()=>[Jt(te("div",{class:z(e.ui.input.wrapper)},[e.iconName?(L(),H(r,{key:0,name:e.iconName,class:z(e.iconClass),"aria-hidden":"true"},null,8,["name","class"])):G("",!0),dt(l,{ref:"comboboxInput",value:e.query,class:z([e.ui.input.base,e.ui.input.size,e.ui.input.height,e.ui.input.padding,e.icon&&e.ui.input.icon.padding,e.closeButton&&e.ui.input.closeButton.padding]),placeholder:e.placeholder,"aria-label":e.placeholder,autocomplete:"off",onChange:n[0]||(n[0]=f=>e.query=f.target.value)},null,8,["value","class","placeholder","aria-label"]),e.closeButton?(L(),H(c,Ee({key:1,"aria-label":"Close"},{...e.ui.default.closeButton||{},...e.closeButton},{class:e.ui.input.closeButton.base,onClick:e.onClear}),null,16,["class","onClick"])):G("",!0)],2),[[Qt,e.searchable]]),e.groups.length?(L(),H(a,{key:0,static:"",hold:"",as:"div","aria-label":"Commands",class:z(e.ui.container)},{default:de(()=>[(L(!0),U(Oe,null,Me(e.groups,f=>(L(),H(u,{key:f.key,query:e.query,group:f,"group-attribute":e.groupAttribute,"command-attribute":e.commandAttribute,"selected-icon":e.selectedIcon,ui:e.ui},Xt({_:2},[Me(e.$slots,(g,O)=>({name:O,fn:de(R=>[ce(e.$slots,O,Zt(en(R)))])}))]),1032,["query","group","group-attribute","command-attribute","selected-icon","ui"]))),128))]),_:3},8,["class"])):e.emptyState?ce(e.$slots,"empty-state",{key:1},()=>[te("div",{class:z(e.ui.emptyState.wrapper)},[e.emptyState.icon?(L(),H(r,{key:0,name:e.emptyState.icon,class:z(e.ui.emptyState.icon),"aria-hidden":"true"},null,8,["name","class"])):G("",!0),te("p",{class:z(e.query?e.ui.emptyState.queryLabel:e.ui.emptyState.label)},ee(e.query?e.emptyState.queryLabel:e.emptyState.label),3)],2)]):G("",!0)]),_:3},16,["by","model-value","multiple","nullable","class","onUpdate:modelValue"])}const As=st(Ts,[["render",$s]]),Rt=e=>{if(!e.children)return e._path;for(const n of(e==null?void 0:e.children)||[]){const t=Rt(n);if(t)return t}},Tt=(e,n)=>{for(const t of n){if(t._path===e&&!t._id)return t.children;if(t.children){const i=Tt(e,t.children);if(i)return i}}},$t=(e,n)=>{for(const t of n){if(t._path===e)return t;if(t.children){const i=$t(e,t.children);if(i)return i}}},_s=(e,n,t)=>{let i;const s=(o,r)=>{for(const l of r)if(!(o!=="/"&&l._path==="/")){if(o!=null&&o.startsWith(l._path)&&l[n]&&(i=l[n]),l._path===o)return;l.children&&s(o,l.children)}};return s(e,t),i},Ps=()=>({navBottomLink:Rt,navDirFromPath:Tt,navPageFromPath:$t,navKeyFromPath:_s});function Fs(...e){return E(()=>e.every(n=>q(n)))}function Ls(e){return E(()=>!q(e))}const zs=/^[^-]+.*-.*[^-]+$/,Ns=/^[^_]+.*_.*[^_]+$/,Bs=(e,n={})=>{const{macOS:t,usingInput:i}=ft();let s=[];const o=N([]),r=()=>{o.value.splice(0,o.value.length)},l=ct(r,n.chainDelay??800),c=u=>{if(!u.key)return;const a=/^[a-z]{1}$/i.test(u.key);let d;if(o.value.push(u.key),o.value.length>=2){d=o.value.slice(-2).join("-");for(const f of s.filter(g=>g.chained))if(f.key===d){f.condition.value&&(u.preventDefault(),f.handler()),r();return}}for(const f of s.filter(g=>!g.chained))if(u.key.toLowerCase()===f.key&&u.metaKey===f.metaKey&&u.ctrlKey===f.ctrlKey&&!(a&&u.shiftKey!==f.shiftKey)){f.condition.value&&(u.preventDefault(),f.handler()),r();return}l()};s=Object.entries(e).map(([u,a])=>{var O,R;if(!a)return null;let d;u.includes("-")&&u!=="-"&&!((O=u.match(zs))!=null&&O.length)&&console.trace(`[Shortcut] Invalid key: "${u}"`),u.includes("_")&&u!=="_"&&!((R=u.match(Ns))!=null&&R.length)&&console.trace(`[Shortcut] Invalid key: "${u}"`);const f=u.includes("-")&&u!=="-";if(f)d={key:u.toLowerCase(),metaKey:!1,ctrlKey:!1,shiftKey:!1,altKey:!1};else{const A=u.toLowerCase().split("_").map(S=>S);d={key:A.filter(S=>!["meta","ctrl","shift","alt"].includes(S)).join("_"),metaKey:A.includes("meta"),ctrlKey:A.includes("ctrl"),shiftKey:A.includes("shift"),altKey:A.includes("alt")}}if(d.chained=f,!t.value&&d.metaKey&&!d.ctrlKey&&(d.metaKey=!1,d.ctrlKey=!0),typeof a=="function"?d.handler=a:typeof a=="object"&&(d={...d,handler:a.handler}),!d.handler)return console.trace("[Shortcut] Invalid value"),null;const g=[];return a.usingInput?typeof a.usingInput=="string"&&g.push(E(()=>i.value===a.usingInput)):g.push(Ls(i)),d.condition=Fs(...g,...a.whenever||[]),d}).filter(Boolean),tn("keydown",c)},Us=ne({inheritAttrs:!1,__name:"ContentSearch",props:{modelValue:{type:Boolean,default:void 0},files:{type:Array,default:()=>[]},navigation:{type:Array,default:()=>[]},links:{type:Array,default:()=>[]},groups:{type:Array,default:()=>[]},fuse:{type:Object,default:()=>({})},hideColorMode:{type:Boolean,default:!1},ui:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(e,{expose:n,emit:t}){const i=nn(),s=E(()=>({padding:"p-0 sm:p-4",rounded:"rounded-none sm:rounded-lg",width:"sm:max-w-3xl",height:"h-dvh sm:h-[28rem]",commandPalette:{input:{height:"h-[--header-height] sm:h-12",icon:{size:"h-5 w-5",padding:"ps-11"}},group:{command:{prefix:"!text-foreground after:content-['_>']"}},container:"scroll-py-10"},fileIcon:{name:"i-heroicons-document-text"},default:{closeButton:{icon:i.ui.icons.close,color:"gray",variant:"ghost",size:"sm"}}})),o=e,r=t,l=sn(),{navKeyFromPath:c}=Ps(),{usingInput:u}=ft(),{isContentSearchModalOpen:a}=on(),d=ln(cn),f=rn(),{ui:g,attrs:O}=at("content.search",Ae(o,"ui"),s,void 0,!0),R=d.smaller("sm"),A=N();function S(p){var m;return p.icon?p.icon:(m=p.navigation)!=null&&m.icon?p.navigation.icon:(o.navigation&&(p.icon=c(p._path,"icon",o.navigation)),p.icon||g.value.fileIcon.name)}const k=E({get(){return o.modelValue!==void 0?o.modelValue:a.value},set(p){o.modelValue!==void 0?r("update:modelValue",p):a.value=p}}),F=E(()=>ut({},o.fuse,{fuseOptions:{ignoreLocation:!0,includeMatches:!0,threshold:.1,keys:[{name:"title",weight:5},{name:"label",weight:5},{name:"suffix",weight:3},"children.children.value","children.children.children.value","children.children.children.children.value","children.children.children.children.children.value"]},resultLimit:12}));function y(p,m){return p?m:m==null?void 0:m.filter(I=>!I.child)}const _=E(()=>{var m,I;let p=[];return(m=o.navigation)!=null&&m.length&&(o.navigation.some(w=>{var P;return!!((P=w.children)!=null&&P.length)})?p=(o.navigation||[]).map(w=>({key:w._path,label:w.title,commands:(o.files||[]).filter(P=>{var D;return(D=P._path)==null?void 0:D.startsWith(w._path)}).flatMap(P=>x(P,w)),filter:y})):p=[{key:"docs",commands:(o.files||[]).flatMap(w=>x(w)),filter:y}]),[((I=o.links)==null?void 0:I.length)&&{key:"links",label:"Links",commands:o.links.flatMap(w=>[w.to&&{id:l.resolve(w.to).fullPath,...w,icon:w.icon||g.value.fileIcon.name},...(w.children||[]).map(P=>({id:l.resolve(P.to).fullPath,prefix:w.label,suffix:P.description,...P,icon:P.icon||w.icon||g.value.fileIcon.name}))]).filter(Boolean)},...p,...o.groups||[],!(f!=null&&f.forced)&&!o.hideColorMode&&{key:"theme",label:"Theme",commands:[{id:"theme-light",label:"Light",icon:i.ui.icons.light,disabled:f.preference==="light",click:()=>{f.preference="light"}},{id:"theme-dark",label:"Dark",icon:i.ui.icons.dark,disabled:f.preference==="dark",click:()=>{f.preference="dark"}}]}].filter(Boolean)}),$=E(()=>k.value||!u.value);function x(p,m){var w,P,D,ie,fe;const I=(w=dn((m==null?void 0:m.children)||[],p))==null?void 0:w.map(({title:W})=>W).join(" > ");return[{id:p._id,label:((P=p.navigation)==null?void 0:P.title)||p.title,title:((D=p.navigation)==null?void 0:D.title)||p.title,prefix:I,to:p._path,suffix:p.description,children:T(v(((ie=p==null?void 0:p.body)==null?void 0:ie.children)||[])),icon:S(p)},...Object.entries(b(((fe=p==null?void 0:p.body)==null?void 0:fe.children)||[])).map(([W,{title:oe,children:ye}])=>{var pe;if(oe)return{id:`${p._path}${W}`,label:oe,prefix:(I?`${I} > `:"")+`${((pe=p.navigation)==null?void 0:pe.title)||p.title}`,to:`${p._path}${W}`,children:T(ye),icon:S(p),child:!0}})].filter(Boolean)}function h(p){return(p==null?void 0:p.map(m=>{var I,w;if(["code","code-inline","em","a","strong"].includes(m.tag))return{type:"text",value:((w=(I=m.children)==null?void 0:I.find(P=>P.type==="text"))==null?void 0:w.value)||""};if(m.type==="text")return m}).filter(Boolean))||[]}function T(p){return p.map(m=>{if(["pre","style","video"].includes(m.tag))return;let I=[...m.children||[]];return["p","h1","h2","h3","h4","h5","h6","li","td","th"].includes(m.tag)&&I.length?(I=h(I).reduce((w,P)=>(w.length&&w[w.length-1].type==="text"?w[w.length-1].value+=P.value||"":w.push({...P}),w),[]),{...m,children:I}):{...m,children:T(I)}}).filter(Boolean)}function v(p){const m=[];for(const I of p){if(["h1","h2","h3"].includes(I.tag))break;m.push(I)}return m}function b(p){var P,D,ie,fe;const m={};let I="",w="";for(const W of p)["h1","h2","h3"].includes(W.tag)&&(w=((ie=(D=(P=W.children)==null?void 0:P.map(oe=>{var ye,pe;if(oe.type==="text")return oe.value;if(["code","code-inline","em","a","strong"].includes(oe.tag))return(pe=(ye=oe.children)==null?void 0:ye.find(At=>At.type==="text"))==null?void 0:pe.value}))==null?void 0:D.filter(Boolean))==null?void 0:ie.join(" "))||"",w&&((fe=W.props)!=null&&fe.id)&&(I=`#${encodeURIComponent(W.props.id)}`)),m[I]?m[I].children.push(W):m[I]={children:[W],title:w};return m}function M(p){k.value=!1;const m=p[0];m&&(m.click?m.click():m.to?m.target==="_blank"||m.to.startsWith("http")?window.open(m.to,m.target||"_blank"):l.push(m.to):m.href&&window.open(m.href,"_blank"))}return Bs({meta_k:{usingInput:!0,whenever:[$],handler:()=>{k.value=!k.value}},escape:{usingInput:!0,whenever:[k],handler:()=>{k.value=!1}}}),n({commandPaletteRef:A}),(p,m)=>{const I=As,w=un;return L(),H(w,{modelValue:j(k),"onUpdate:modelValue":m[1]||(m[1]=P=>an(k)?k.value=P:null),overlay:!j(R),transition:!j(R),ui:j(g)},{default:de(()=>[dt(I,Ee({ref_key:"commandPaletteRef",ref:A,"model-value":[],groups:j(_),ui:j(g).commandPalette,"close-button":j(g).default.closeButton,fuse:j(F),multiple:""},j(O),{"onUpdate:modelValue":M,onClose:m[0]||(m[0]=P=>k.value=!1)}),null,16,["groups","ui","close-button","fuse"])]),_:1},8,["modelValue","overlay","transition","ui"])}}});export{Us as default};
